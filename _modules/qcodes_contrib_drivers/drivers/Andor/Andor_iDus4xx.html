<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../../genindex.html"><link rel="search" title="Search" href="../../../../search.html">

    <!-- Generated with Sphinx 9.0.4 and Furo 2025.12.19 -->
        <title>qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx - qcodes_contrib_drivers 0.25.0.dev118+main.g2747e26 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../index.html"><div class="brand">qcodes_contrib_drivers 0.25.0.dev118+main.g2747e26 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../index.html">
  
  <span class="sidebar-brand-text">qcodes_contrib_drivers 0.25.0.dev118+main.g2747e26 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../examples/index.html">Examples of how to use drivers</a><input aria-label="Toggle navigation of Examples of how to use drivers" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Agilent_N9000A.html">Example with the Agilent N9000A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/AimTTi_EL320P.html">Example notebook for AimTTi EL320P</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Andor_DU401.html">Qcodes example with Andor DU401 BU2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Andor_iDus4xx.html">Qcodes example with Andor iDus416</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Attocube_ANC300.html">QCoDeS example with Attocube ANC300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Aviosys_IP_Power_9258S.html">Qcodes example with Aviosys IP Power 9258S</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/BlueFors.html">Example with the BlueFors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/CopperMountain_M5180.html">Example with CopperMountain Model M5180 vector network analyzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/CopperMountain_M5180.html#Setup-db-and-station-for-test-measurerment">Setup db and station for test measurerment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/CopperMountain_M5180.html#Look-at-the-names-and-the-labels-of-the-Sxx-parameters">Look at the names and the labels of the Sxx parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/ERASynth.html">Example with ERASynth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Gentec_Maestro.html">QCoDeS Example with Gentec Maestro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Holzworth_HS900.html">Example notebook for the Holzworth HS900B RF synthesizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Horiba_FHR.html">Example for Horiba FHR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/ITest.html">Example with the iTest from Bilt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Keithley_6430.html">Example notebook for Keithley 6430 SMU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Keithley_6430.html#Measure-resistance-of-a-~100k\Omega-resistor">Measure resistance of a ~100k<span class="math notranslate nohighlight">\(\Omega\)</span> resistor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Keysight_M3202A.html">Keysight M3202A AWG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Keysight_M3202A%20with%20digitizer.html">Keysight M3202A AWG example with digitizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Lakeshore_311.html">Qcodes example with Lakeshore 311</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Lakeshore_625.html">Example with Lakeshore Model 625 Superconducting Magnet power supply</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Lakeshore_M81_SSM_Example.html">Connect to M81</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/NanoVNA_H4.html">QCoDeS example with NanoVNA H4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/NationalInstruments_DAQ.html">National Instruments Multifunction DAQ example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/NationalInstruments_PXIe_2597.html">Qcodes example for National Instruments PXIe-2597 RF Switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/NationalInstruments_RFSG.html">Qcodes example with the NI RFSG signal generator driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Newport_AG-UC8.html">QCoDeS Example with Newport AG-UC8 Piezo Motion Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/OxfordInstruments_Proteox.html">Proteox system integration with QCoDeS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/OxfordTriton.html">Example of the oxford triton driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Rigol_DSG3136B.html">QCoDeS example with Rigol DSG3136B</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Rohde_Schwarz_HMC8043.html">QCoDeS Example with R&amp;S HMC 8043 Power Supply</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Rohde_Schwarz_HMP4040.html">QCoDeS Example with R&amp;S HMP4040 Power Supply</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Rohde_Schwarz_SMW200A.html">QCoDeS example with Rohe&amp;Schwarz SMW200A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/SR844.html">Changing the Sensitivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/SR844.html#Preparing-for-reading-the-buffer-and-measurement">Preparing for reading the buffer and measurement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Shamrock_SR750.html">Qcodes example with Shamrock SR750</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/SignalCore.html">Example with the microwave source SC5521A from Signal Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/SignalCore.html#Device-connection">Device connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/SignalCore.html#Set-parameters">Set parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/SignalRecovery_7270.html">Example of Signal Recovery 7270 driver usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/SingleQuantum.html">Example for Single Quantum SNSPD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Specs_Tramea.html">NANONIS TRAMEA EXAMPLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Standa_10MWA168.html">Qcodes example with Standa 10MWA168</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/SwabianInstruments_TimeTagger.html">Qcodes example with Swabian Instruments Time Tagger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Tektronix_AFG3000_series.html">Tektronix AFG3000 series arbitrary function generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Tektronix_FCA3100.html">overview over all parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Tektronix_FCA3100.html#Usage-of-the-two-main-parameters">Usage of the two main parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Tektronix_Keithley_2182A.html">Keithley 2182A Nanovoltmeter - Basic Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Tektronix_Keithley_6500.html">QCoDeS Example with Tektronix Keithley Digital Multimeter DMM6500</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Thorlabs_K10CR1.html">Qcodes example with Thorlabs K10CR1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Thorlabs_KLS1550.html">QCoDeS example with Thorlabs KLS1550 laser source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Thorlabs_MFF10x.html">Qcodes example with Thorlabs MFF10x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Thorlabs_PRM1Z8.html">Qcodes example with Thorlabs PRM1Z8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Valon_5015.html">QCoDeS example with Valon 5015</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Vaunix_LDA.html">Qcodes example for Vaunix LDA step attenuator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Vaunix_LDA.html#Model-with-many-channels">Model with many channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Windfreak_SynthUSB3.html">QCoDeS example with Windfreak SynthUSB3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/ZVL13.html">Rohde &amp; Schwarz ZVL13 Vector Network Analyzer example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/ZVL13.html#Parameters-definition">Parameters definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/ZurichInstruments_HF2LI.html">Zurich Instruments HF2LI example</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../examples/QDevil/index.html">QDevil drivers</a><input aria-label="Toggle navigation of QDevil drivers" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../examples/QDevil/QDAC1/index.html">QCoDeS examples of how to use QDAC-I</a><input aria-label="Toggle navigation of QCoDeS examples of how to use QDAC-I" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC1/QCodes%20example%20with%20QDevil_QDAC.html">QCoDeS Example with QDevil_QDAC</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/index.html">QCoDeS examples of how to use QDAC-II</a><input aria-label="Toggle navigation of QCoDeS examples of how to use QDAC-II" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/AWG.html">QDAC-II arbitrary-waveform generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/Chaining.html">QDAC-II trigger chaining</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/DC_Constant.html">QDAC-II constant voltage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/Debugging.html">QDAC-II debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/GateLeakage.html">Gate Leakage Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/GateLeakageMultipleQDACs.html">Gate Leakage using multiple QDAC-IIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/List.html">QDAC-II voltage lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/MultiGenerator.html">QDAC-II multiple generators per channel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/PyvisaAwg.html">PyVisa direct use of QDAC-II</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/Scan.html">QDAC-II 1D &amp; 2D scan</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/Scan2DDiode.html">QDAC-II 2D diode scan</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/Sine.html">QDAC-II sine waves</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/Square.html">QDAC-II square waves</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/Sweep.html">QDAC-II voltage sweep</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/SyncMultipleQDACs.html">Synchronise multiple QDAC-IIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/Triangle.html">QDAC-II triangle waves</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/VirtualGates.html">QDAC-II virtual gates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QDAC2/do2dScan.html">QDAC-II 2D diode scan</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../examples/QDevil/QSwitch/index.html">QCoDeS examples of how to use QSwitch</a><input aria-label="Toggle navigation of QCoDeS examples of how to use QSwitch" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QSwitch/Debugging.html">QSwitch debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../examples/QDevil/QSwitch/Usage.html">QSwitch usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/HP/HP8594E.html">QCoDeS Example with HP8594E</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Cryomagnetics/LM_500.html">Example for Cyromagnetics Model LM-500 Helium Level meter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Cryomagnetics/LM_500.html#Import-qcodes_contrib_drivers-LM_500-driver">Import qcodes_contrib_drivers LM_500 driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Cryomagnetics/LM_500.html#Connect-to-the-instrument---this-case-GPIB">Connect to the instrument - this case GPIB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Cryomagnetics/Model_4G.html">Example for Cyromagnetics Model 4G magnet power supply</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/Cryomagnetics/Model_4G.html#Import-qcodes_contrib_drivers-Model_4G-driver">Import qcodes_contrib_drivers Model_4G driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/OxfordInstruments/ITC_503.html">Example for Oxford Instruments Intelligent Temperature Controller Model 503</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/OxfordInstruments/ITC_503.html#Import-qcodes_contrib_drivers-ITC503-driver">Import qcodes_contrib_drivers ITC503 driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/OxfordInstruments/ITC_503.html#Connect-to-the-instrument---this-case-GPIB">Connect to the instrument - this case GPIB</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.html">qcodes_contrib_drivers.drivers package</a><input aria-label="Toggle navigation of qcodes_contrib_drivers.drivers package" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Advantech.html">qcodes_contrib_drivers.drivers.Advantech package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Agilent.html">qcodes_contrib_drivers.drivers.Agilent package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.AimTTi.html">qcodes_contrib_drivers.drivers.AimTTi package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Ametek.html">qcodes_contrib_drivers.drivers.Ametek package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html">qcodes_contrib_drivers.drivers.Andor package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Attocube.html">qcodes_contrib_drivers.drivers.Attocube package</a><input aria-label="Toggle navigation of qcodes_contrib_drivers.drivers.Attocube package" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Attocube.ANC350Lib.html">qcodes_contrib_drivers.drivers.Attocube.ANC350Lib package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Aviosys.html">qcodes_contrib_drivers.drivers.Aviosys package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Bilt.html">qcodes_contrib_drivers.drivers.Bilt package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.BlueFors.html">qcodes_contrib_drivers.drivers.BlueFors package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.CopperMountain.html">qcodes_contrib_drivers.drivers.CopperMountain package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Cryocon.html">qcodes_contrib_drivers.drivers.Cryocon package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Cryogenic.html">qcodes_contrib_drivers.drivers.Cryogenic package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.DaylightSolutions.html">qcodes_contrib_drivers.drivers.DaylightSolutions package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.ERAInstruments.html">qcodes_contrib_drivers.drivers.ERAInstruments package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.GeneralMicrowave.html">qcodes_contrib_drivers.drivers.GeneralMicrowave package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Gentec.html">qcodes_contrib_drivers.drivers.Gentec package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Holzworth.html">qcodes_contrib_drivers.drivers.Holzworth package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Horiba.html">qcodes_contrib_drivers.drivers.Horiba package</a><input aria-label="Toggle navigation of qcodes_contrib_drivers.drivers.Horiba package" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Horiba.private.html">qcodes_contrib_drivers.drivers.Horiba.private package</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html">qcodes_contrib_drivers.drivers.Keysight package</a><input aria-label="Toggle navigation of qcodes_contrib_drivers.drivers.Keysight package" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.SD_common.html">qcodes_contrib_drivers.drivers.Keysight.SD_common package</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Lakeshore.html">qcodes_contrib_drivers.drivers.Lakeshore package</a><input aria-label="Toggle navigation of qcodes_contrib_drivers.drivers.Lakeshore package" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Lakeshore.modules.html">qcodes_contrib_drivers.drivers.Lakeshore.modules package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.LighthousePhotonics.html">qcodes_contrib_drivers.drivers.LighthousePhotonics package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.M2.html">qcodes_contrib_drivers.drivers.M2 package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Minicircuits.html">qcodes_contrib_drivers.drivers.Minicircuits package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.MontanaInstruments.html">qcodes_contrib_drivers.drivers.MontanaInstruments package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.NanoVNA.html">qcodes_contrib_drivers.drivers.NanoVNA package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.NationalInstruments.html">qcodes_contrib_drivers.drivers.NationalInstruments package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Newport.html">qcodes_contrib_drivers.drivers.Newport package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.OxfordInstruments.html">qcodes_contrib_drivers.drivers.OxfordInstruments package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.QDevil.html">qcodes_contrib_drivers.drivers.QDevil package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.QphoX.html">qcodes_contrib_drivers.drivers.QphoX package</a><input aria-label="Toggle navigation of qcodes_contrib_drivers.drivers.QphoX package" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.QphoX.CryoSwitchController.html">qcodes_contrib_drivers.drivers.QphoX.CryoSwitchController package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.QuTech.html">qcodes_contrib_drivers.drivers.QuTech package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.QuantumDesign.html">qcodes_contrib_drivers.drivers.QuantumDesign package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Rigol.html">qcodes_contrib_drivers.drivers.Rigol package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html">qcodes_contrib_drivers.drivers.RohdeSchwarz package</a><input aria-label="Toggle navigation of qcodes_contrib_drivers.drivers.RohdeSchwarz package" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.private.html">qcodes_contrib_drivers.drivers.RohdeSchwarz.private package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.SPECS.html">qcodes_contrib_drivers.drivers.SPECS package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Shamrock.html">qcodes_contrib_drivers.drivers.Shamrock package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Siglent.html">qcodes_contrib_drivers.drivers.Siglent package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.SignalCore.html">qcodes_contrib_drivers.drivers.SignalCore package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.SingleQuantum.html">qcodes_contrib_drivers.drivers.SingleQuantum package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Spectrum.html">qcodes_contrib_drivers.drivers.Spectrum package</a><input aria-label="Toggle navigation of qcodes_contrib_drivers.drivers.Spectrum package" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Spectrum.py_header.html">qcodes_contrib_drivers.drivers.Spectrum.py_header package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Standa.html">qcodes_contrib_drivers.drivers.Standa package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.StanfordResearchSystems.html">qcodes_contrib_drivers.drivers.StanfordResearchSystems package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.SwabianInstruments.html">qcodes_contrib_drivers.drivers.SwabianInstruments package</a><input aria-label="Toggle navigation of qcodes_contrib_drivers.drivers.SwabianInstruments package" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.SwabianInstruments.private.html">qcodes_contrib_drivers.drivers.SwabianInstruments.private package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Tektronix.html">qcodes_contrib_drivers.drivers.Tektronix package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Thermotek.html">qcodes_contrib_drivers.drivers.Thermotek package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Thorlabs.html">qcodes_contrib_drivers.drivers.Thorlabs package</a><input aria-label="Toggle navigation of qcodes_contrib_drivers.drivers.Thorlabs package" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Thorlabs.private.html">qcodes_contrib_drivers.drivers.Thorlabs.private package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Valon.html">qcodes_contrib_drivers.drivers.Valon package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Vaunix.html">qcodes_contrib_drivers.drivers.Vaunix package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Windfreak.html">qcodes_contrib_drivers.drivers.Windfreak package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.ZurichInstruments.html">qcodes_contrib_drivers.drivers.ZurichInstruments package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.physik_instrumente.html">qcodes_contrib_drivers.drivers.physik_instrumente package</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <h1>Source code for qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Qcodes driver for Andor iDus 4xx cameras.</span>

<span class="sd">Tested with a Andor iDus 416. A typical workflow would look something</span>
<span class="sd">like this::</span>

<span class="sd">    ccd = AndorIDus4xx(&#39;ccd&#39;)</span>
<span class="sd">    ccd.acquisition_mode(&#39;kinetics&#39;)</span>
<span class="sd">    ccd.read_mode(&#39;random track&#39;)</span>
<span class="sd">    ccd.preamp_gain(1.)</span>
<span class="sd">    ccd.number_accumulations(2)</span>
<span class="sd">    ccd.number_kinetics(10)</span>
<span class="sd">    ccd.random_track_settings((2, [20, 30, 40, 40]))</span>
<span class="sd">    # The following time parameters are computed to a closest valid</span>
<span class="sd">    # value by the SDK. Setting all to zero would hence result in the</span>
<span class="sd">    # shortest possible acquisition time. These values should be set</span>
<span class="sd">    # last since they depend on other settings.</span>
<span class="sd">    ccd.exposure_time(0)</span>
<span class="sd">    ccd.accumulation_cycle_time(0)</span>
<span class="sd">    ccd.kinetic_cycle_time(0)</span>
<span class="sd">    # Acquire data</span>
<span class="sd">    data = ccd.ccd_data()</span>
<span class="sd">    data.shape  # (10, 2, 2000)</span>
<span class="sd">    # The shape of the ccd_data parameter is automatically adjusted to</span>
<span class="sd">    # the acquisition and read modes</span>
<span class="sd">    ccd.acquisition_mode(&#39;single scan&#39;)</span>
<span class="sd">    ccd.read_mode(&#39;full vertical binning&#39;)</span>
<span class="sd">    data = ccd.ccd_data()</span>
<span class="sd">    data.shape  # (2000,)</span>

<span class="sd">TODO (thangleiter, 23/11/11):</span>

<span class="sd"> - Triggering</span>
<span class="sd"> - Handle shutter modes</span>
<span class="sd"> - Multiple cameras</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">operator</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">textwrap</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">Iterator</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">partial</span><span class="p">,</span> <span class="n">wraps</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">NamedTuple</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy.typing</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">npt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qcodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">validators</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qcodes.instrument</span><span class="w"> </span><span class="kn">import</span> <span class="n">Instrument</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qcodes.parameters</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">ParameterBase</span><span class="p">,</span> <span class="n">ParamRawDataType</span><span class="p">,</span> <span class="n">DelegateParameter</span><span class="p">,</span>
                               <span class="n">ManualParameter</span><span class="p">,</span> <span class="n">MultiParameter</span><span class="p">,</span> <span class="n">Parameter</span><span class="p">,</span> <span class="n">ParameterWithSetpoints</span><span class="p">,</span>
                               <span class="n">create_on_off_val_mapping</span><span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qcodes.parameters.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">_Cache</span><span class="p">,</span> <span class="n">_CacheProtocol</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">.</span><span class="w"> </span><span class="kn">import</span> <span class="n">post_processing</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.private.andor_sdk</span><span class="w"> </span><span class="kn">import</span> <span class="n">atmcd64d</span><span class="p">,</span> <span class="n">SDKError</span>

<span class="n">_T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;_T&#39;</span><span class="p">)</span>

<span class="n">_ACQUISITION_TIMEOUT_FACTOR</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="sd">&quot;&quot;&quot;Relative overhead for acquisition timeout.&quot;&quot;&quot;</span>
<span class="n">_MINIMUM_ACQUISITION_TIMEOUT</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="sd">&quot;&quot;&quot;Minimum acquisition timeout in seconds.&quot;&quot;&quot;</span>


<div class="viewcode-block" id="AcquisitionTimings">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AcquisitionTimings">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AcquisitionTimings</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Timings computed by the SDK.&quot;&quot;&quot;</span>
    <span class="n">exposure_time</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">accumulation_cycle_time</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">kinetic_cycle_time</span><span class="p">:</span> <span class="nb">float</span></div>



<span class="k">class</span><span class="w"> </span><span class="nc">_AcquisitionParams</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Data tuple defining acquisition parameters and objects.</span>

<span class="sd">    Used internally.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timeout_ms</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">cycle_time</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">number_accumulations</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">number_frames_acquired</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">buffer</span><span class="p">:</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">]</span>
    <span class="n">shape</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="n">fetch_lazy</span><span class="p">:</span> <span class="nb">bool</span>


<span class="nd">@wraps</span><span class="p">(</span><span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">dedent</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wrap textwrap.dedent for mypy for use with __doc__ attributes.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>


<span class="k">def</span><span class="w"> </span><span class="nf">_merge_docstrings</span><span class="p">(</span><span class="o">*</span><span class="n">objs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__doc__</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">doc</span> <span class="o">+</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__doc__</span>
    <span class="k">return</span> <span class="n">doc</span> <span class="k">if</span> <span class="n">doc</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="kc">None</span>


<span class="k">class</span><span class="w"> </span><span class="nc">_HeterogeneousSequence</span><span class="p">(</span><span class="n">validators</span><span class="o">.</span><span class="n">Validator</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="n">Any</span><span class="p">]]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A validator for heterogeneous sequences.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">elt_validators</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">validators</span><span class="o">.</span><span class="n">Validator</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">validators</span><span class="o">.</span><span class="n">Anything</span><span class="p">(),)</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_elt_validators</span> <span class="o">=</span> <span class="n">elt_validators</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_valid_values</span> <span class="o">=</span> <span class="p">([</span><span class="n">vval</span> <span class="k">for</span> <span class="n">vval</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="p">(</span>
            <span class="n">elt_validator</span><span class="o">.</span><span class="n">_valid_values</span> <span class="k">for</span> <span class="n">elt_validator</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elt_validators</span>
        <span class="p">))],)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2"> is not a sequence; </span><span class="si">{</span><span class="n">context</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2"> has not length </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s2"> but </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">for</span> <span class="n">elt</span><span class="p">,</span> <span class="n">validator</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elt_validators</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">validator</span><span class="p">,</span> <span class="n">validators</span><span class="o">.</span><span class="n">Anything</span><span class="p">):</span>
                <span class="n">validator</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">elt_validators</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">validators</span><span class="o">.</span><span class="n">Validator</span><span class="p">[</span><span class="n">Any</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elt_validators</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elt_validators</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">_PostProcessingCallable</span><span class="p">(</span><span class="n">validators</span><span class="o">.</span><span class="n">Validator</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">]],</span>
                                                            <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">]]]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A validator for post-processing functions.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_valid_values</span> <span class="o">=</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&lt;Callable[[npt.NDArray[np.int32]], npt.NDArray[np.int32]&gt;&#39;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">post_processing</span><span class="o">.</span><span class="n">PostProcessingFunction</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2"> is not a post-processing function; </span><span class="si">{</span><span class="n">context</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="DetectorPixelsParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.DetectorPixelsParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DetectorPixelsParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stores the detector size in pixels.&quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

<div class="viewcode-block" id="DetectorPixelsParameter.DetectorPixels">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.DetectorPixelsParameter.DetectorPixels">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">DetectorPixels</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
        <span class="n">horizontal</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">vertical</span><span class="p">:</span> <span class="nb">int</span></div>


<div class="viewcode-block" id="DetectorPixelsParameter.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.DetectorPixelsParameter.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DetectorPixels</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DetectorPixels</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_detector</span><span class="p">())</span></div>
</div>



<div class="viewcode-block" id="PixelSizeParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.PixelSizeParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">PixelSizeParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stores the pixel size in microns.&quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

<div class="viewcode-block" id="PixelSizeParameter.PixelSize">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.PixelSizeParameter.PixelSize">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">PixelSize</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
        <span class="n">horizontal</span><span class="p">:</span> <span class="nb">float</span>
        <span class="n">vertical</span><span class="p">:</span> <span class="nb">float</span></div>


<div class="viewcode-block" id="PixelSizeParameter.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.PixelSizeParameter.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PixelSize</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">PixelSize</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_pixel_size</span><span class="p">())</span></div>
</div>



<div class="viewcode-block" id="DetectorSizeParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.DetectorSizeParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DetectorSizeParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stores the detector size in microns.&quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

<div class="viewcode-block" id="DetectorSizeParameter.DetectorSize">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.DetectorSizeParameter.DetectorSize">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">DetectorSize</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
        <span class="n">horizontal</span><span class="p">:</span> <span class="nb">float</span>
        <span class="n">vertical</span><span class="p">:</span> <span class="nb">float</span></div>


<div class="viewcode-block" id="DetectorSizeParameter.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.DetectorSizeParameter.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DetectorSize</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="n">px_x</span><span class="p">,</span> <span class="n">px_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_detector</span><span class="p">()</span>
        <span class="n">size_x</span><span class="p">,</span> <span class="n">size_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_pixel_size</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DetectorSize</span><span class="p">(</span><span class="n">px_x</span> <span class="o">*</span> <span class="n">size_x</span><span class="p">,</span> <span class="n">px_y</span> <span class="o">*</span> <span class="n">size_y</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="AcquiredPixelsParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AcquiredPixelsParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AcquiredPixelsParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the shape of a single frame for the current settings.&quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

<div class="viewcode-block" id="AcquiredPixelsParameter.AcquiredPixels">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AcquiredPixelsParameter.AcquiredPixels">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">AcquiredPixels</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
        <span class="n">horizontal</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">vertical</span><span class="p">:</span> <span class="nb">int</span></div>


<div class="viewcode-block" id="AcquiredPixelsParameter.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AcquiredPixelsParameter.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AcquiredPixels</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">detector_pixels</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()</span>
        <span class="n">read_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">read_mode</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">read_mode</span> <span class="o">==</span> <span class="s1">&#39;image&#39;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">hbin</span><span class="p">,</span> <span class="n">vbin</span><span class="p">,</span> <span class="n">hstart</span><span class="p">,</span> <span class="n">hend</span><span class="p">,</span> <span class="n">vstart</span><span class="p">,</span> <span class="n">vend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">image_settings</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Please set the image_settings parameter.&#39;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>
            <span class="n">width</span> <span class="o">=</span> <span class="p">(</span><span class="n">hend</span> <span class="o">-</span> <span class="n">hstart</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">hbin</span>
            <span class="n">height</span> <span class="o">=</span> <span class="p">(</span><span class="n">vend</span> <span class="o">-</span> <span class="n">vstart</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">vbin</span>
        <span class="k">elif</span> <span class="n">read_mode</span> <span class="o">==</span> <span class="s1">&#39;multi track&#39;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">height</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">multi_track_settings</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Please set the multi_track_settings parameter.&#39;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>
        <span class="k">elif</span> <span class="n">read_mode</span> <span class="o">==</span> <span class="s1">&#39;random track&#39;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">height</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">random_track_settings</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Please set the random_track_settings parameter.&#39;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>
        <span class="k">elif</span> <span class="n">read_mode</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;single track&#39;</span><span class="p">,</span> <span class="s1">&#39;full vertical binning&#39;</span><span class="p">):</span>
            <span class="n">height</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AcquiredPixels</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="SingleTrackSettingsParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.SingleTrackSettingsParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SingleTrackSettingsParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents the settings for single-track acquisition.&quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

<div class="viewcode-block" id="SingleTrackSettingsParameter.SingleTrackSettings">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.SingleTrackSettingsParameter.SingleTrackSettings">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">SingleTrackSettings</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
        <span class="n">centre</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span></div>


<div class="viewcode-block" id="SingleTrackSettingsParameter.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.SingleTrackSettingsParameter.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SingleTrackSettings</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">SingleTrackSettings</span><span class="p">(</span><span class="o">*</span><span class="n">val</span><span class="p">)</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="SingleTrackSettingsParameter.set_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.SingleTrackSettingsParameter.set_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="n">SingleTrackSettings</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_single_track</span><span class="p">(</span><span class="o">*</span><span class="n">val</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="MultiTrackSettingsParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.MultiTrackSettingsParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MultiTrackSettingsParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the settings for multi-track acquisition.</span>

<span class="sd">    When setting, a sequence of *three* numbers (number, height, and</span>
<span class="sd">    offset).</span>

<span class="sd">    When getting, a tuple of *three* numbers (number, height, offset) is</span>
<span class="sd">    again returned. In addition, the CCD calculates the gap between</span>
<span class="sd">    tracks and the offset from the bottom row. These are stored as</span>
<span class="sd">    properties of the parameter, i.e., accessible through :attr:`gap`</span>
<span class="sd">    and :attr:`bottom`, respectively.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

<div class="viewcode-block" id="MultiTrackSettingsParameter.MultiTrackSettings">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.MultiTrackSettingsParameter.MultiTrackSettings">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">MultiTrackSettings</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
        <span class="n">number</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span></div>


    <span class="n">_bottom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_gap</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The bottom row as computed by the CCD.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">gap</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The gap between rows as computed by the CCD.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gap</span>

<div class="viewcode-block" id="MultiTrackSettingsParameter.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.MultiTrackSettingsParameter.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MultiTrackSettings</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">MultiTrackSettings</span><span class="p">(</span><span class="o">*</span><span class="n">val</span><span class="p">)</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="MultiTrackSettingsParameter.set_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.MultiTrackSettingsParameter.set_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_multi_track</span><span class="p">(</span><span class="o">*</span><span class="n">val</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="RandomTrackSettingsParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.RandomTrackSettingsParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RandomTrackSettingsParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents the settings for random-track acquisition.&quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

<div class="viewcode-block" id="RandomTrackSettingsParameter.RandomTrackSettings">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.RandomTrackSettingsParameter.RandomTrackSettings">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">RandomTrackSettings</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
        <span class="n">number_tracks</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">areas</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span></div>


<div class="viewcode-block" id="RandomTrackSettingsParameter.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.RandomTrackSettingsParameter.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RandomTrackSettings</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">RandomTrackSettings</span><span class="p">(</span><span class="o">*</span><span class="n">val</span><span class="p">)</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="RandomTrackSettingsParameter.set_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.RandomTrackSettingsParameter.set_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="n">RandomTrackSettings</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_random_tracks</span><span class="p">(</span><span class="o">*</span><span class="n">val</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ImageSettingsParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.ImageSettingsParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ImageSettingsParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents the settings for image acquisition.&quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

<div class="viewcode-block" id="ImageSettingsParameter.ImageSettings">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.ImageSettingsParameter.ImageSettings">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">ImageSettings</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
        <span class="n">hbin</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">vbin</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">hstart</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">hend</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">vstart</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">vend</span><span class="p">:</span> <span class="nb">int</span></div>


<div class="viewcode-block" id="ImageSettingsParameter.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.ImageSettingsParameter.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ImageSettings</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ImageSettings</span><span class="p">(</span><span class="o">*</span><span class="n">val</span><span class="p">)</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="ImageSettingsParameter.set_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.ImageSettingsParameter.set_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="n">ImageSettings</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_image</span><span class="p">(</span><span class="o">*</span><span class="n">val</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="FastKineticsSettingsParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.FastKineticsSettingsParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">FastKineticsSettingsParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents fast kinetics settings.&quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

<div class="viewcode-block" id="FastKineticsSettingsParameter.FastKineticsSettings">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.FastKineticsSettingsParameter.FastKineticsSettings">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">FastKineticsSettings</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
        <span class="n">exposed_rows</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">series_length</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">time</span><span class="p">:</span> <span class="nb">float</span>
        <span class="n">mode</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">hbin</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">vbin</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span></div>


<div class="viewcode-block" id="FastKineticsSettingsParameter.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.FastKineticsSettingsParameter.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">FastKineticsSettings</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">FastKineticsSettings</span><span class="p">(</span><span class="o">*</span><span class="n">val</span><span class="p">)</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="FastKineticsSettingsParameter.set_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.FastKineticsSettingsParameter.set_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="n">FastKineticsSettings</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_fast_kinetics</span><span class="p">(</span><span class="o">*</span><span class="n">val</span><span class="p">)</span>
        <span class="c1"># Set the number of frames so that CCDData knows the correct</span>
        <span class="c1"># shape of the data.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">number_kinetics</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="c1"># The exposure time always seems to be 0 in fast kinetics mode</span>
        <span class="c1"># self.instrument.exposure_time.set(val[2])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">read_mode</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">read_mode</span><span class="o">.</span><span class="n">inverse_val_mapping</span><span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]])</span></div>
</div>



<div class="viewcode-block" id="ParameterWithSetSideEffect">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.ParameterWithSetSideEffect">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ParameterWithSetSideEffect</span><span class="p">(</span><span class="n">Parameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A :class:`Parameter` allowing for side effects on set events.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    set_side_effect :</span>
<span class="sd">        A callable that is run before every set event. Receives the set</span>
<span class="sd">        value as sole argument.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">set_side_effect</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">set_cmd</span> <span class="o">:=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;set_cmd&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;ParameterWithSetSideEffect requires a set_cmd&#39;</span><span class="p">)</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">set_raw</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">ParamRawDataType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Parameter does not allow overriding set_raw method</span>
            <span class="n">set_side_effect</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">set_cmd</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">set_cmd</span><span class="o">=</span><span class="n">set_raw</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>



<div class="viewcode-block" id="PixelAxis">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.PixelAxis">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">PixelAxis</span><span class="p">(</span><span class="n">Parameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A parameter that enumerates the pixels along an axis.</span>

<span class="sd">    If acquisition is in &#39;image&#39; mode, getting this parameter returns</span>
<span class="sd">    the center pixels of subpixels binned together, e.g. for the</span>
<span class="sd">    horizontal axis::</span>

<span class="sd">        px = [hstart + i * hbin + hbin // 2</span>
<span class="sd">              for i in range((hend - hstart) // hbin + 1)]</span>

<span class="sd">    Otherwise, simply enumerates the number of pixels starting from 1.</span>

<span class="sd">    If you have a calibration of horizontal pixels to, for example in a</span>
<span class="sd">    spectrograph, wavelength at hand, set this parameter&#39;s get_parser</span>
<span class="sd">    and unit.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dimension</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">instrument</span><span class="p">:</span> <span class="s1">&#39;AndorIDus4xx&#39;</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dimension</span> <span class="o">=</span> <span class="n">dimension</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">instrument</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="PixelAxis.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.PixelAxis.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int_</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">read_mode</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;image&#39;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">hbin</span><span class="p">,</span> <span class="n">vbin</span><span class="p">,</span> <span class="n">hstart</span><span class="p">,</span> <span class="n">hend</span><span class="p">,</span> <span class="n">vstart</span><span class="p">,</span> <span class="n">vend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">image_settings</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Please set the image_settings parameter.&#39;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>
            <span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="n">hbin</span><span class="p">,</span> <span class="n">vbin</span><span class="p">]</span>
            <span class="n">starts</span> <span class="o">=</span> <span class="p">[</span><span class="n">hstart</span><span class="p">,</span> <span class="n">vstart</span><span class="p">]</span>
            <span class="n">ends</span> <span class="o">=</span> <span class="p">[</span><span class="n">hend</span><span class="p">,</span> <span class="n">vend</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">starts</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dimension</span><span class="p">],</span> <span class="n">ends</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dimension</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                             <span class="n">bins</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dimension</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int_</span><span class="p">)</span> <span class="o">+</span> <span class="n">bins</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dimension</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="c1"># In the other read modes there is no horizontal binning whereas for the vertical axis</span>
        <span class="c1"># select rows may be read out and binned, so we cannot assign meaningful &#39;pixel&#39; values to</span>
        <span class="c1"># them.</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">acquired_pixels</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()[</span><span class="bp">self</span><span class="o">.</span><span class="n">dimension</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                         <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int_</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TimeAxis">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.TimeAxis">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TimeAxis</span><span class="p">(</span><span class="n">Parameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A parameter that holds the start of each exposure window.</span>

<span class="sd">    If the acquisition mode is a kinetic series, the size corresponds</span>
<span class="sd">    to number_kinetics(), otherwise it&#39;s always 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>

<div class="viewcode-block" id="TimeAxis.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.TimeAxis.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="n">n_pts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">acquired_frames</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">kinetic_cycle_time</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">n_pts</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PersistentDelegateParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.PersistentDelegateParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">PersistentDelegateParameter</span><span class="p">(</span><span class="n">DelegateParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A delegate parameter with an independent cache.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Parameter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span> <span class="n">_CacheProtocol</span> <span class="o">=</span> <span class="n">_Cache</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_val_age</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;max_val_age&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span></div>



<div class="viewcode-block" id="CCDData">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.CCDData">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CCDData</span><span class="p">(</span><span class="n">ParameterWithSetpoints</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter class for data taken with an Andor CCD.</span>

<span class="sd">    The data is saved in an integer array with dynamic shape depending</span>
<span class="sd">    on the acquisition and readout modes.</span>

<span class="sd">     - If the acquisition mode is a kinetic series, the first axis is a</span>
<span class="sd">       :class:`TimeAxis` with size the number of frames, otherwise it is</span>
<span class="sd">       empty.</span>
<span class="sd">     - The last axes correspond to the image dimensions, which may be 1d</span>
<span class="sd">       or 2d depending on the readout mode. If 2d, the y-axis (vertical</span>
<span class="sd">       dimension) is stored first.</span>

<span class="sd">    Note:</span>

<span class="sd">        In 2d mode, the last two axes are switched around compared to</span>
<span class="sd">        the rest of this driver.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">instrument</span><span class="p">:</span> <span class="n">AndorIDus4xx</span>
    <span class="n">_delegates</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="s1">&#39;CCDDataDelegateParameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

<div class="viewcode-block" id="CCDData.get_raw">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.CCDData.get_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No instrument attached to Parameter.&quot;</span><span class="p">)</span>

        <span class="c1"># Calls get_acquisition_timings() to get the correct timing info.</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">_get_acquisition_data</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">arm</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">start_acquisition</span><span class="p">()</span>

        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">number_frames_acquired</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Acquiring frame &#39;</span>
                                          <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">frame</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">number_frames_acquired</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">accumulation</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">number_accumulations</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Acquiring accumulation &#39;</span>
                                              <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">accumulation</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">number_accumulations</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">wait_for_acquisition_timeout</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">timeout_ms</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">fetch_lazy</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Fetching frame &#39;</span>
                                              <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">frame</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">number_frames_acquired</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_oldest_image_by_reference</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">frame</span><span class="p">])</span>

            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">fetch_lazy</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Fetching all frames.&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_acquired_data_by_reference</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Aborting acquisition after &#39;</span>
                                      <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="si">:</span><span class="s1">.3g</span><span class="si">}</span><span class="s1"> s.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">abort_acquisition</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Finished acquisition after &#39;</span>
                                      <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="si">:</span><span class="s1">.3g</span><span class="si">}</span><span class="s1"> s.&#39;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span></div>


<div class="viewcode-block" id="CCDData.register_delegate">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.CCDData.register_delegate">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">register_delegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delegate</span><span class="p">:</span> <span class="s1">&#39;CCDDataDelegateParameter&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_delegates</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">delegate</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">setpoints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ParameterBase</span><span class="p">]:</span>
        <span class="c1"># Only here for mypy: https://github.com/python/mypy/issues/5936</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">setpoints</span>

    <span class="nd">@setpoints</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">setpoints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setpoints</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ParameterBase</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># https://github.com/python/mypy/issues/5936#issuecomment-1429175144</span>
        <span class="n">ParameterWithSetpoints</span><span class="o">.</span><span class="n">setpoints</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setpoints</span><span class="p">)</span>  <span class="c1"># type: ignore[attr-defined]</span>
        <span class="k">for</span> <span class="n">delegate</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delegates</span><span class="p">:</span>
            <span class="n">delegate</span><span class="o">.</span><span class="n">setpoints</span> <span class="o">=</span> <span class="n">setpoints</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">vals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">validators</span><span class="o">.</span><span class="n">Validator</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Only here for mypy: https://github.com/python/mypy/issues/5936</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">vals</span>

    <span class="nd">@vals</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">vals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">:</span> <span class="n">validators</span><span class="o">.</span><span class="n">Validator</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># https://github.com/python/mypy/issues/5936#issuecomment-1429175144</span>
        <span class="n">ParameterWithSetpoints</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">)</span>  <span class="c1"># type: ignore[attr-defined]</span>
        <span class="k">for</span> <span class="n">delegate</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delegates</span><span class="p">:</span>
            <span class="n">delegate</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span></div>



<div class="viewcode-block" id="CCDDataDelegateParameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.CCDDataDelegateParameter">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CCDDataDelegateParameter</span><span class="p">(</span><span class="n">DelegateParameter</span><span class="p">,</span> <span class="n">ParameterWithSetpoints</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A DelegateParameter that can be used as a ParameterWithSetpoints.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">CCDData</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;vals&#39;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">&#39;vals&#39;</span><span class="p">))</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;setpoints&#39;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">&#39;setpoints&#39;</span><span class="p">))</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;snapshot_get&#39;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">&#39;_snapshot_get&#39;</span><span class="p">))</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;snapshot_value&#39;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">&#39;_snapshot_value&#39;</span><span class="p">))</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_with_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_register_with_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">):</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">CCDData</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">source</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Expected source to be CCData or delegate thereof.&#39;</span><span class="p">)</span>
        <span class="n">source</span><span class="o">.</span><span class="n">register_delegate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>



<div class="viewcode-block" id="AndorIDus4xx">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AndorIDus4xx</span><span class="p">(</span><span class="n">Instrument</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instrument driver for the Andor iDus 4xx family CCDs.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: Instrument name.</span>
<span class="sd">        dll_path: Path to the atmcd64.dll file. If not set, a default path is used.</span>
<span class="sd">        camera_id: ID for the desired CCD.</span>
<span class="sd">        min_temperature: The minimum temperature of operation for the CCD. Defaults to the value</span>
<span class="sd">                         the model supports. Note that that might apply for water cooling only.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        serial_number: Serial number of the CCD.</span>
<span class="sd">        head_model: Head model of the CCD.</span>
<span class="sd">        firmware_version: Firmware version of the CCD.</span>
<span class="sd">        firmware_build: Firmware build of the CCD.</span>
<span class="sd">        acquisition_mode_capabilities: Available acquisition modes.</span>
<span class="sd">        read_mode_capabilities: Available read modes.</span>
<span class="sd">        trigger_mode_capabilities: Available trigger modes.</span>
<span class="sd">        pixel_mode_capabilities: Bit-depth and color mode.</span>
<span class="sd">        feature_capabilities: Available camera and SDK features.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># For iDus models, there are only a single channel and amplifier each AFAIK</span>
    <span class="n">_CHANNEL</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">_AMPLIFIER</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># TODO (SvenBo90): implement further trigger modes</span>
    <span class="c1"># TODO (SvenBo90): handle shutter closing and opening timings</span>
    <span class="c1"># TODO (thangleiter): implement further real-time filter modes</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">camera_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                 <span class="n">min_temperature</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># link to dll</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span> <span class="o">=</span> <span class="n">atmcd64d</span><span class="p">(</span><span class="n">dll_path</span><span class="o">=</span><span class="n">dll_path</span><span class="p">)</span>

        <span class="c1"># initialization</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_current_camera</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_camera_handle</span><span class="p">(</span><span class="n">camera_id</span><span class="p">))</span>

        <span class="c1"># get camera information</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serial_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_camera_serial_number</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">head_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_head_model</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">firmware_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_hardware_version</span><span class="p">()[</span><span class="mi">4</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">firmware_build</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_hardware_version</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode_capabilities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_capabilities</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_mode_capabilities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_capabilities</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trigger_mode_capabilities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_capabilities</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pixel_mode_capabilities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_capabilities</span><span class="p">()[</span><span class="mi">4</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feature_capabilities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_capabilities</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>

        <span class="c1"># add the instrument parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;accumulation_cycle_time&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_acquisition_timings</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_accumulation_cycle_time</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ans</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">ans</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                           <span class="n">max_val_age</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;accumulation cycle time&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_accumulation_cycle_time</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;cooler&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">is_cooler_on</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_cooler</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;cooler&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">cooler_on</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;cooler_mode&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_cooler_mode</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;maintain&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;return&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Cooler mode&#39;</span><span class="p">,</span>
                           <span class="n">initial_value</span><span class="o">=</span><span class="s1">&#39;return&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Determines whether the cooler is switched off when the camera is</span>
<span class="s2">                           shut down.</span>

<span class="s2">                           &#39;maintain&#39; means it is maintained on shutdown, &#39;return&#39; means the</span>
<span class="s2">                           camera returns to ambient temperature. Defaults to &#39;return&#39;.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;cosmic_ray_filter_mode&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_filter_mode</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_filter_mode</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Cosmic ray filter mode&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_filter_mode</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;data_averaging_filter_mode&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_get_data_averaging_mode</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_set_data_averaging_mode</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;No Averaging Filter&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="s1">&#39;Recursive Averaging Filter&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                                        <span class="s1">&#39;Frame Averaging Filter&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data averaging filter mode&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_set_data_averaging_mode</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;data_averaging_filter_factor&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_get_averaging_factor</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_set_averaging_factor</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data averaging filter factor&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_set_averaging_factor</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;data_averaging_filter_frame_count&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_get_averaging_frame_count</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_set_averaging_frame_count</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data averaging filter frame count&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_set_averaging_frame_count</span><span class="o">.</span><span class="vm">__doc__</span>
                           <span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;detector_size&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">DetectorSizeParameter</span><span class="p">,</span>
                           <span class="n">names</span><span class="o">=</span><span class="n">DetectorSizeParameter</span><span class="o">.</span><span class="n">DetectorSize</span><span class="o">.</span><span class="n">_fields</span><span class="p">,</span>
                           <span class="n">shapes</span><span class="o">=</span><span class="p">((),</span> <span class="p">()),</span>
                           <span class="n">units</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span>
                           <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Horizontal chip size&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical chip size&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">DetectorSizeParameter</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">,</span>
                           <span class="n">snapshot_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;exposure_time&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_acquisition_timings</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_exposure_time</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ans</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">ans</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                           <span class="n">max_val_age</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;exposure time&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_exposure_time</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;fast_kinetics_settings&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">FastKineticsSettingsParameter</span><span class="p">,</span>
                           <span class="n">names</span><span class="o">=</span><span class="n">FastKineticsSettingsParameter</span><span class="o">.</span><span class="n">FastKineticsSettings</span><span class="o">.</span><span class="n">_fields</span><span class="p">,</span>
                           <span class="n">shapes</span><span class="o">=</span><span class="p">((),</span> <span class="p">(),</span> <span class="p">(),</span> <span class="p">(),</span> <span class="p">(),</span> <span class="p">(),</span> <span class="p">()),</span>
                           <span class="n">units</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">),</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">_HeterogeneousSequence</span><span class="p">([</span><span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                                                        <span class="n">validators</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                                                        <span class="n">validators</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                                                        <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">0</span><span class="p">)]),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_fast_kinetics</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">),</span>
                           <span class="n">snapshot_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;fast_external_trigger&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_fast_ext_trigger</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">(</span>
                               <span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="p">{</span><span class="s1">&#39;Unset&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">}</span>
                           <span class="p">),</span>
                           <span class="n">initial_cache_value</span><span class="o">=</span><span class="s1">&#39;Unset&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Fast external trigger mode&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_fast_ext_trigger</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;fastest_recommended_vertical_shift_speed&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_fastest_recommended_vs_speed</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s/px&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_fastest_recommended_vs_speed</span><span class="o">.</span><span class="vm">__doc__</span>
                           <span class="p">))</span>

        <span class="n">speeds</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_hs_speed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_AMPLIFIER</span><span class="p">,</span> <span class="n">index</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
                  <span class="k">for</span> <span class="n">index</span>
                  <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_number_hs_speeds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_AMPLIFIER</span><span class="p">))]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;horizontal_shift_speed&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Horizontal shift speed&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_hs_speed</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_AMPLIFIER</span><span class="p">),</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">speed</span><span class="p">:</span> <span class="n">index</span>
                                        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">speed</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">speeds</span><span class="p">)}</span> <span class="o">|</span> <span class="p">{</span><span class="s1">&#39;Unset&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
                           <span class="n">initial_cache_value</span><span class="o">=</span><span class="s1">&#39;Unset&#39;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;MHz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_hs_speed</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;keep_clean_time&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_keep_clean_time</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Keep clean cycle duration&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_keep_clean_time</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;kinetic_cycle_time&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_acquisition_timings</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_kinetic_cycle_time</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ans</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">ans</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
                           <span class="n">max_val_age</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Kinetic cycle time&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_kinetic_cycle_time</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;multi_track_settings&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">MultiTrackSettingsParameter</span><span class="p">,</span>
                           <span class="n">names</span><span class="o">=</span><span class="n">MultiTrackSettingsParameter</span><span class="o">.</span><span class="n">MultiTrackSettings</span><span class="o">.</span><span class="n">_fields</span><span class="p">,</span>
                           <span class="n">shapes</span><span class="o">=</span><span class="p">((),</span> <span class="p">(),</span> <span class="p">()),</span>
                           <span class="n">units</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">),</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">_HeterogeneousSequence</span><span class="p">([</span><span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                                                        <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">0</span><span class="p">)]),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_multi_track</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">),</span>
                           <span class="n">snapshot_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;number_accumulations&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_number_accumulations</span><span class="p">,</span>
                           <span class="n">initial_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;number accumulations&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_number_accumulations</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;number_kinetics&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_number_kinetics</span><span class="p">,</span>
                           <span class="n">initial_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;number of frames&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_number_kinetics</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;detector_pixels&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">DetectorPixelsParameter</span><span class="p">,</span>
                           <span class="n">names</span><span class="o">=</span><span class="n">DetectorPixelsParameter</span><span class="o">.</span><span class="n">DetectorPixels</span><span class="o">.</span><span class="n">_fields</span><span class="p">,</span>
                           <span class="n">shapes</span><span class="o">=</span><span class="p">((),</span> <span class="p">()),</span>
                           <span class="n">units</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">),</span>
                           <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Horizontal number of pixels&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical number of pixels&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">DetectorPixelsParameter</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">,</span>
                           <span class="n">snapshot_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;pixel_size&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">PixelSizeParameter</span><span class="p">,</span>
                           <span class="n">names</span><span class="o">=</span><span class="n">PixelSizeParameter</span><span class="o">.</span><span class="n">PixelSize</span><span class="o">.</span><span class="n">_fields</span><span class="p">,</span>
                           <span class="n">shapes</span><span class="o">=</span><span class="p">((),</span> <span class="p">()),</span>
                           <span class="n">units</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span>
                           <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Horizontal pixel size&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical pixel size&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">PixelSizeParameter</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">,</span>
                           <span class="n">snapshot_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Real-time photon counting</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;photon_counting&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_photon_counting</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(),</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Photon counting enabled&#39;</span><span class="p">,</span>
                           <span class="n">initial_cache_value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_photon_counting</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="n">no_of_divisions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_number_photon_counting_divisions</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;photon_counting_divisions&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_photon_counting_divisions</span><span class="p">,</span>
                                           <span class="n">no_of_divisions</span><span class="p">),</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Sequence</span><span class="p">(</span><span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">65535</span><span class="p">),</span>
                                                    <span class="n">length</span><span class="o">=</span><span class="n">no_of_divisions</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                                                    <span class="n">require_sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Photon counting divisions&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_photon_counting_divisions</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;photon_counting_threshold&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_photon_counting_threshold</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Sequence</span><span class="p">(</span><span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">65535</span><span class="p">),</span> <span class="n">length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                                    <span class="n">require_sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Photon counting threshold&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_photon_counting_threshold</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;post_processing_function&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Post processing function&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">ManualParameter</span><span class="p">,</span>
                           <span class="n">initial_value</span><span class="o">=</span><span class="n">post_processing</span><span class="o">.</span><span class="n">Identity</span><span class="p">(),</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">_PostProcessingCallable</span><span class="p">(),</span>
                           <span class="n">set_parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_post_processing_function</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;A callable with signature f(data) -&gt; processed_data that is &quot;</span>
                                     <span class="s2">&quot;used as the ccd_data parameter get_parser.&quot;</span><span class="p">)</span>

        <span class="n">gains</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_preamp_gain</span><span class="p">(</span><span class="n">index</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
                 <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_number_preamp_gains</span><span class="p">())]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;preamp_gain&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Pre-Amplifier gain&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_preamp_gain</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">gain</span><span class="p">:</span> <span class="n">index</span>
                                        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">gain</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">gains</span><span class="p">)}</span> <span class="o">|</span> <span class="p">{</span><span class="s1">&#39;Unset&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
                           <span class="n">initial_cache_value</span><span class="o">=</span><span class="s1">&#39;Unset&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_preamp_gain</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;random_track_settings&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">RandomTrackSettingsParameter</span><span class="p">,</span>
                           <span class="n">names</span><span class="o">=</span><span class="n">RandomTrackSettingsParameter</span><span class="o">.</span><span class="n">RandomTrackSettings</span><span class="o">.</span><span class="n">_fields</span><span class="p">,</span>
                           <span class="n">shapes</span><span class="o">=</span><span class="p">((),</span> <span class="p">()),</span>
                           <span class="n">units</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">),</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">_HeterogeneousSequence</span><span class="p">([</span><span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                                                        <span class="n">validators</span><span class="o">.</span><span class="n">Sequence</span><span class="p">(</span><span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">))]),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_random_tracks</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">),</span>
                           <span class="n">snapshot_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;readout_time&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_readout_time</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Readout time&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_readout_time</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="n">temperature_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_temperature_range</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;set_temperature&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_temperature</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="n">min_temperature</span> <span class="ow">or</span> <span class="n">temperature_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                                <span class="n">max_value</span><span class="o">=</span><span class="n">temperature_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u00b0</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;set temperature&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_temperature</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;shutter_mode&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_shutter_mode</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;fully auto&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="s1">&#39;permanently open&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                        <span class="s1">&#39;permanently closed&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;shutter mode&#39;</span><span class="p">,</span>
                           <span class="n">initial_value</span><span class="o">=</span><span class="s1">&#39;fully auto&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_shutter</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;single_track_settings&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">SingleTrackSettingsParameter</span><span class="p">,</span>
                           <span class="n">names</span><span class="o">=</span><span class="n">SingleTrackSettingsParameter</span><span class="o">.</span><span class="n">SingleTrackSettings</span><span class="o">.</span><span class="n">_fields</span><span class="p">,</span>
                           <span class="n">shapes</span><span class="o">=</span><span class="p">((),</span> <span class="p">()),</span>
                           <span class="n">units</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">),</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Sequence</span><span class="p">(</span><span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">length</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_single_track</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">),</span>
                           <span class="n">snapshot_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Real-time spurious noise filter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;spurious_noise_filter_mode&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_get_mode</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_set_mode</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;No Filter&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="s1">&#39;Median Filter&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                        <span class="s1">&#39;Level Above Filter&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                                        <span class="s1">&#39;Interquartile Range Filter&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                                        <span class="s1">&#39;Noise Threshold Filter&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Spurious noise filter mode&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_set_mode</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;spurious_noise_filter_threshold&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_get_threshold</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_set_threshold</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">65535</span><span class="p">),</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Spurious noise threshold&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">filter_set_threshold</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Camera Status&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_status</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_status</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_status</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_temperature</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u00b0</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_temperature</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_mode&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_trigger_mode</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;internal&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="s1">&#39;external&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                        <span class="s1">&#39;external start&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
                                        <span class="s1">&#39;external exposure&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
                                        <span class="s1">&#39;software trigger&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
                           <span class="n">initial_value</span><span class="o">=</span><span class="s1">&#39;internal&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_trigger_mode</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="n">speeds</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_vs_speed</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
                  <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_number_vs_speeds</span><span class="p">())]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;vertical_shift_speed&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Vertical shift speed&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_vs_speed</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">speed</span><span class="p">:</span> <span class="n">index</span>
                                        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">speed</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">speeds</span><span class="p">)}</span> <span class="o">|</span> <span class="p">{</span><span class="s1">&#39;Unset&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
                           <span class="n">initial_cache_value</span><span class="o">=</span><span class="s1">&#39;Unset&#39;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s/px&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_vs_speed</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="c1"># Parameters that depend on other parameters and therefore cannot be sorted alphabetically</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;image_settings&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">ImageSettingsParameter</span><span class="p">,</span>
                           <span class="n">names</span><span class="o">=</span><span class="n">ImageSettingsParameter</span><span class="o">.</span><span class="n">ImageSettings</span><span class="o">.</span><span class="n">_fields</span><span class="p">,</span>
                           <span class="n">shapes</span><span class="o">=</span><span class="p">((),</span> <span class="p">(),</span> <span class="p">(),</span> <span class="p">(),</span> <span class="p">(),</span> <span class="p">()),</span>
                           <span class="n">units</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">),</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">_HeterogeneousSequence</span><span class="p">([</span>
                               <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector_pixels</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()[</span><span class="mi">0</span><span class="p">]),</span>
                               <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector_pixels</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()[</span><span class="mi">1</span><span class="p">]),</span>
                               <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector_pixels</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()[</span><span class="mi">0</span><span class="p">]),</span>
                               <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector_pixels</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()[</span><span class="mi">0</span><span class="p">]),</span>
                               <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector_pixels</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()[</span><span class="mi">1</span><span class="p">]),</span>
                               <span class="n">validators</span><span class="o">.</span><span class="n">Ints</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector_pixels</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
                           <span class="p">]),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_image</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">),</span>
                           <span class="n">snapshot_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;acquired_accumulations&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_acquired_accumulations</span><span class="p">,</span>
                           <span class="c1"># Always infer from acquisition mode, never use cache</span>
                           <span class="n">max_val_age</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s1">&#39;Number of accumulations per frame.&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;acquired_frames&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_acquired_frames</span><span class="p">,</span>
                           <span class="c1"># Always infer from acquisition mode, never use cache</span>
                           <span class="n">max_val_age</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s1">&#39;Number of frames that will be acquired.&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;acquired_pixels&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">AcquiredPixelsParameter</span><span class="p">,</span>
                           <span class="n">names</span><span class="o">=</span><span class="n">AcquiredPixelsParameter</span><span class="o">.</span><span class="n">AcquiredPixels</span><span class="o">.</span><span class="n">_fields</span><span class="p">,</span>
                           <span class="n">shapes</span><span class="o">=</span><span class="p">((),</span> <span class="p">()),</span>
                           <span class="n">units</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">AcquiredPixelsParameter</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">,</span>
                           <span class="n">snapshot_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;time_axis&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">TimeAxis</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Arrays</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquired_frames</span><span class="o">.</span><span class="n">get_latest</span><span class="p">,)),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Time axis&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">TimeAxis</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;horizontal_axis&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">PixelAxis</span><span class="p">,</span>
                           <span class="n">dimension</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Arrays</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_acquired_horizontal_pixels</span><span class="p">,)),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;px&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Horizontal axis&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">PixelAxis</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;vertical_axis&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">PixelAxis</span><span class="p">,</span>
                           <span class="n">dimension</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Arrays</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_acquired_vertical_pixels</span><span class="p">,)),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;px&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Vertical axis&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">PixelAxis</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;ccd_data&#39;</span><span class="p">,</span>
                           <span class="n">setpoints</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_axis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_axis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_axis</span><span class="p">,),</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">CCDData</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_ccd_data</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Arrays</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">acquired_frames</span><span class="o">.</span><span class="n">get_latest</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">_acquired_vertical_pixels</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">_acquired_horizontal_pixels</span>
                           <span class="p">)),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;cts&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CCD Data&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">CCDData</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;ccd_data_bg_corrected&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">CCDDataDelegateParameter</span><span class="p">,</span>
                           <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_subtract_background</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CCD Data (bg corrected)&#39;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;cts&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;CCD data with a background image previously taken &quot;</span>
                                     <span class="s2">&quot;subtracted.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;ccd_data_rate&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">CCDDataDelegateParameter</span><span class="p">,</span>
                           <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_count_rate</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CCD Data rate&#39;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;cps&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;CCD data (counts) divided by the total exposure time per &quot;</span>
                                     <span class="s2">&quot;frame (including accumulations).&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;ccd_data_rate_bg_corrected&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">CCDDataDelegateParameter</span><span class="p">,</span>
                           <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ccd_data_bg_corrected</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_count_rate</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CCD Data rate (bg corrected)&#39;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;cps&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;CCD data with a background image previously taken &quot;</span>
                                     <span class="s2">&quot;subtracted and divided by the total exposure time per &quot;</span>
                                     <span class="s2">&quot;frame (including accumulations).&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">PersistentDelegateParameter</span><span class="p">,</span>
                           <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_background</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Takes a background image for the current acquisition settings.</span>

<span class="s2">                           Note that data conversions set in post_processing_function are</span>
<span class="s2">                           still run.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;acquisition_mode&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">ParameterWithSetSideEffect</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_acquisition_mode</span><span class="p">,</span>
                           <span class="n">set_side_effect</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_process_acquisition_mode</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;single scan&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                        <span class="s1">&#39;accumulate&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                                        <span class="s1">&#39;kinetics&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                                        <span class="s1">&#39;fast kinetics&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                                        <span class="s1">&#39;run till abort&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span>
                           <span class="n">initial_value</span><span class="o">=</span><span class="s1">&#39;single scan&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;acquisition mode&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_acquisition_mode</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;read_mode&#39;</span><span class="p">,</span>
                           <span class="n">parameter_class</span><span class="o">=</span><span class="n">ParameterWithSetSideEffect</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_read_mode</span><span class="p">,</span>
                           <span class="n">set_side_effect</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_process_read_mode</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;full vertical binning&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="s1">&#39;multi track&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                        <span class="s1">&#39;random track&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                                        <span class="s1">&#39;single track&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                                        <span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
                           <span class="n">initial_value</span><span class="o">=</span><span class="s1">&#39;full vertical binning&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;read mode&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_read_mode</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect_message</span><span class="p">()</span>

    <span class="c1"># get methods</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_acquired_accumulations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># Fast kinetics does not seem to support accumulations</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;single scan&#39;</span><span class="p">,</span> <span class="s1">&#39;fast kinetics&#39;</span><span class="p">}:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_accumulations</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_acquired_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;kinetics&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span><span class="o">.</span><span class="n">get_latest</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_kinetics</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_acquisition_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_AcquisitionParams</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepare all relevant data needed by acquisition functions.&quot;&quot;&quot;</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">freeze_acquisition_settings</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;acquisition_mode&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;run till abort&#39;</span><span class="p">:</span>
            <span class="n">cycle_time</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;acquisition_timings&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">kinetic_cycle_time</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cycle_time</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;acquisition_timings&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">accumulation_cycle_time</span>

        <span class="n">timeout_ms</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">_ACQUISITION_TIMEOUT_FACTOR</span> <span class="o">*</span> <span class="n">cycle_time</span><span class="p">,</span>
                         <span class="n">_MINIMUM_ACQUISITION_TIMEOUT</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e3</span>

        <span class="n">number_frames</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;acquired_frames&#39;</span><span class="p">]</span>
        <span class="n">number_accumulations</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;acquired_accumulations&#39;</span><span class="p">]</span>
        <span class="n">number_pixels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;acquired_pixels&#39;</span><span class="p">])</span>

        <span class="c1"># In fast kinetics mode, an acquisition event only occurs once per series,</span>
        <span class="c1"># not number_frames times like in regular kinetic series mode.</span>
        <span class="k">if</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;acquisition_mode&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;fast kinetics&#39;</span><span class="p">:</span>
            <span class="n">number_frames_acquired</span> <span class="o">=</span> <span class="n">number_frames</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">number_frames_acquired</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1"># We decide here which method we use to fetch data from the SDK. The CCD</span>
        <span class="c1"># has a circular buffer, so we should fetch data during acquisition if</span>
        <span class="c1"># the desired result is larger.</span>
        <span class="n">fetch_lazy</span> <span class="o">=</span> <span class="n">number_frames</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_size_of_circular_buffer</span><span class="p">()</span>

        <span class="c1"># TODO (thangleiter): for fast kinetics, one might want to fetch a number of images</span>
        <span class="c1">#                     every few acquisitions.</span>
        <span class="k">if</span> <span class="n">fetch_lazy</span><span class="p">:</span>
            <span class="n">buffer</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">number_frames</span> <span class="o">*</span> <span class="n">number_pixels</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">buffer</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">number_frames</span><span class="p">,</span> <span class="n">number_pixels</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>

        <span class="n">shape</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">setpoints</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">size</span> <span class="k">for</span> <span class="n">setpoints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">setpoints</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_AcquisitionParams</span><span class="p">(</span><span class="n">timeout_ms</span><span class="p">,</span> <span class="n">cycle_time</span><span class="p">,</span> <span class="n">number_accumulations</span><span class="p">,</span>
                                  <span class="n">number_frames_acquired</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="n">fetch_lazy</span><span class="p">)</span>

<div class="viewcode-block" id="AndorIDus4xx.get_idn">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.get_idn">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_idn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;vendor&#39;</span><span class="p">:</span> <span class="s1">&#39;Andor&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">head_model</span><span class="p">,</span>
                <span class="s1">&#39;serial&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serial_number</span><span class="p">),</span>
                <span class="s1">&#39;firmware&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">firmware_version</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">firmware_build</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">}</span></div>


    <span class="c1"># set methods</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_set_cooler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cooler_on</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cooler_on</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">cooler_on</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">cooler_on</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">cooler_off</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_shutter_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shutter_mode</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">set_shutter</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">shutter_mode</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

    <span class="c1"># further methods</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_acquired_horizontal_pixels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquired_pixels</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_acquired_vertical_pixels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquired_pixels</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_acquisition_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_val</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># Invalidate relevant caches</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acquired_frames</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acquired_accumulations</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>

        <span class="c1"># Update self.ccd_data with correct dimensions</span>
        <span class="n">setpoints</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PixelAxis</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PixelAxis</span><span class="p">,</span> <span class="n">PixelAxis</span><span class="p">]</span>
        <span class="n">shape</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="nb">int</span><span class="p">],</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">int</span><span class="p">]]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">setpoints</span><span class="p">:</span>
            <span class="n">setpoints</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertical_axis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_axis</span><span class="p">)</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_acquired_vertical_pixels</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquired_horizontal_pixels</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">setpoints</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">horizontal_axis</span><span class="p">,)</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_acquired_horizontal_pixels</span><span class="p">,)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_time_dimension</span><span class="p">(</span><span class="n">param_val</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">setpoints</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_axis</span><span class="p">,)</span> <span class="o">+</span> <span class="n">setpoints</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">validators</span><span class="o">.</span><span class="n">Arrays</span><span class="p">(</span>
                <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquired_frames</span><span class="o">.</span><span class="n">get_latest</span><span class="p">,)</span> <span class="o">+</span> <span class="n">shape</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">setpoints</span> <span class="o">=</span> <span class="n">setpoints</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">validators</span><span class="o">.</span><span class="n">Arrays</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_read_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_val</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># Invalidate relevant caches</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acquired_pixels</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>

        <span class="c1"># Update self.ccd_data with correct dimensions</span>
        <span class="n">setpoints</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">TimeAxis</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[()]</span>
        <span class="n">shape</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[()]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">setpoints</span><span class="p">:</span>
            <span class="n">setpoints</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_axis</span><span class="p">,)</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquired_frames</span><span class="o">.</span><span class="n">get_latest</span><span class="p">,)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">setpoints</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertical_dimension</span><span class="p">(</span><span class="n">param_val</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">setpoints</span> <span class="o">=</span> <span class="n">setpoints</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertical_axis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_axis</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">validators</span><span class="o">.</span><span class="n">Arrays</span><span class="p">(</span>
                <span class="n">shape</span><span class="o">=</span><span class="n">shape</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_acquired_vertical_pixels</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquired_horizontal_pixels</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">setpoints</span> <span class="o">=</span> <span class="n">setpoints</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">horizontal_axis</span><span class="p">,)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ccd_data</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">validators</span><span class="o">.</span><span class="n">Arrays</span><span class="p">(</span>
                <span class="n">shape</span><span class="o">=</span><span class="n">shape</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_acquired_horizontal_pixels</span><span class="p">,)</span>
            <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_has_vertical_dimension</span><span class="p">(</span><span class="n">read_mode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">read_mode</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_has_time_dimension</span><span class="p">(</span><span class="n">acquisition_mode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">acquisition_mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_to_count_rate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int_</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parser to convert counts into count rate.&quot;&quot;&quot;</span>
        <span class="c1"># Always get the exposure time since it&#39;s computed by the camera lazily.</span>
        <span class="n">total_exposure_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exposure_time</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;single scan&#39;</span><span class="p">,</span> <span class="s1">&#39;run till abort&#39;</span><span class="p">}:</span>
            <span class="n">total_exposure_time</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_accumulations</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">val</span> <span class="o">/</span> <span class="n">total_exposure_time</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_background</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stores current acquisition settings as parameter metadata.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="n">load_metadata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">freeze_acquisition_settings</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_ccd_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">:</span>
        <span class="c1"># Make sure post_processing_function always gets a 3d array but return</span>
        <span class="c1"># the shape that CCDData returns.</span>
        <span class="n">shp</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_time_dimension</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()):</span>
            <span class="n">shp</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertical_dimension</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()):</span>
            <span class="n">shp</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">post_processing_function</span><span class="p">()(</span><span class="n">val</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">shp</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_post_processing_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="n">_T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_T</span><span class="p">:</span>
        <span class="c1"># Make sure the post-processing function knows the dll</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="s1">&#39;atmcd64d&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">val</span><span class="o">.</span><span class="n">atmcd64d</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="s1">&#39;atmcd64d&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;DRV_IDLE&#39;</span><span class="p">:</span> <span class="s1">&#39;IDLE waiting on instructions.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DRV_TEMPCYCLE&#39;</span><span class="p">:</span> <span class="s1">&#39;Executing temperature cycle.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DRV_ACQUIRING&#39;</span><span class="p">:</span> <span class="s1">&#39;Acquisition in progress.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DRV_ACCUM_TIME_NOT_MET&#39;</span><span class="p">:</span> <span class="s1">&#39;Unable to meet Accumulate cycle time.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DRV_KINETIC_TIME_NOT_MET&#39;</span><span class="p">:</span> <span class="s1">&#39;Unable to meet Kinetic cycle time.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DRV_ERROR_ACK&#39;</span><span class="p">:</span> <span class="s1">&#39;Unable to communicate with card.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DRV_ACQ_BUFFER&#39;</span><span class="p">:</span> <span class="s1">&#39;Computer unable to read the data via the ISA &#39;</span>
                              <span class="s1">&#39;slot at the required rate.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DRV_ACQ_DOWNFIFO_FULL&#39;</span><span class="p">:</span> <span class="s1">&#39;Computer unable to read data fast &#39;</span>
                                     <span class="s1">&#39;enough to stop camera memory going full.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DRV_SPOOLERROR&#39;</span><span class="p">:</span> <span class="s1">&#39;Overflow of the spool buffer.&#39;</span>
        <span class="p">}</span>
        <span class="n">status_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">error_codes</span><span class="p">[</span><span class="n">code</span><span class="p">]</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">status_code</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">status</span><span class="p">[</span><span class="n">status_code</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_subtract_background</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">background</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No background acquired. Perform a get on the &#39;background&#39; &quot;</span>
                               <span class="s2">&quot;parameter&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">background_is_valid</span><span class="p">:</span>
            <span class="n">background_settings</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                                   <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">freeze_acquisition_settings</span><span class="p">()}</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Background was acquired for different settings; cannot subtract &#39;</span>
                               <span class="s1">&#39;it. Consider taking a new background or changing the settings. &#39;</span>
                               <span class="sa">f</span><span class="s1">&#39;Previous settings were: </span><span class="si">{</span><span class="n">background_settings</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span> <span class="o">-</span> <span class="n">background</span>

<div class="viewcode-block" id="AndorIDus4xx.freeze_acquisition_settings">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.freeze_acquisition_settings">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">freeze_acquisition_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;acquisition_mode&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span><span class="o">.</span><span class="n">get_latest</span><span class="p">(),</span>
                <span class="s1">&#39;acquisition_timings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acquisition_timings</span><span class="p">(),</span>
                <span class="s1">&#39;acquired_frames&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_acquired_frames</span><span class="p">(),</span>
                <span class="s1">&#39;acquired_accumulations&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_acquired_accumulations</span><span class="p">(),</span>
                <span class="c1"># acquired_pixels can change depending on other settings; perform new get</span>
                <span class="s1">&#39;acquired_pixels&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquired_pixels</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span>
                <span class="s1">&#39;fast_kinetics_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">fast_kinetics_settings</span><span class="o">.</span><span class="n">get_latest</span><span class="p">(),</span>
                <span class="s1">&#39;read_mode&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span><span class="o">.</span><span class="n">get_latest</span><span class="p">(),</span>
                <span class="s1">&#39;single_track_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">single_track_settings</span><span class="o">.</span><span class="n">get_latest</span><span class="p">(),</span>
                <span class="s1">&#39;multi_track_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">multi_track_settings</span><span class="o">.</span><span class="n">get_latest</span><span class="p">(),</span>
                <span class="s1">&#39;random_track_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_track_settings</span><span class="o">.</span><span class="n">get_latest</span><span class="p">(),</span>
                <span class="s1">&#39;image_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_settings</span><span class="o">.</span><span class="n">get_latest</span><span class="p">()}</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">background_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">valid</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="n">current_settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">freeze_acquisition_settings</span><span class="p">()</span>
        <span class="n">background_settings</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                               <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">current_settings</span><span class="p">}</span>

        <span class="n">keys_to_ignore</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;single_track_settings&#39;</span><span class="p">,</span> <span class="s1">&#39;multi_track_settings&#39;</span><span class="p">,</span> <span class="s1">&#39;random_track_settings&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;image_settings&#39;</span><span class="p">,</span> <span class="s1">&#39;fast_kinetics_settings&#39;</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">current_settings</span><span class="p">[</span><span class="s1">&#39;acquisition_mode&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;fast kinetics&#39;</span><span class="p">:</span>
            <span class="n">keys_to_ignore</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;fast_kinetics_settings&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">current_settings</span><span class="p">[</span><span class="s1">&#39;read_mode&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;full vertical binning&#39;</span><span class="p">:</span>
            <span class="n">keys_to_ignore</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">current_settings</span><span class="p">[</span><span class="s1">&#39;read_mode&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_settings&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">current_settings</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="n">background_settings</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span>
                   <span class="n">keys_to_ignore</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">current_settings</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>

<div class="viewcode-block" id="AndorIDus4xx.close">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.close">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">shut_down</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="AndorIDus4xx.arm">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.arm">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">arm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Arm the CCD for acquisition.</span>

<span class="sd">        This method ensures the camera is not yet acquiring, frees the</span>
<span class="sd">        internal memory, and finally prepares it for acquisition using</span>
<span class="sd">        the current acquisition timings.</span>

<span class="sd">        While not required, calling this method ahead of acquisition</span>
<span class="sd">        reduces the overhead when actually starting it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;DRV_IDLE&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">status</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;DRV_ACQUIRING&#39;</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Device not ready to acquire data. </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">free_internal_memory</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepare_acquisition</span><span class="p">()</span></div>


    <span class="c1"># Some methods of the dll that we expose directly on the instrument</span>
<div class="viewcode-block" id="AndorIDus4xx.cancel_wait">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.cancel_wait">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">cancel_wait</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">cancel_wait</span><span class="p">()</span></div>


    <span class="n">cancel_wait</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">atmcd64d</span><span class="o">.</span><span class="n">cancel_wait</span><span class="o">.</span><span class="vm">__doc__</span>

<div class="viewcode-block" id="AndorIDus4xx.abort_acquisition">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.abort_acquisition">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">abort_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;DRV_ACQUIRING&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Aborting acquisition.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">abort_acquisition</span><span class="p">()</span></div>


    <span class="n">abort_acquisition</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">atmcd64d</span><span class="o">.</span><span class="n">abort_acquisition</span><span class="o">.</span><span class="vm">__doc__</span>

<div class="viewcode-block" id="AndorIDus4xx.prepare_acquisition">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.prepare_acquisition">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">prepare_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Preparing acquisition.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">prepare_acquisition</span><span class="p">()</span></div>


    <span class="n">prepare_acquisition</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">atmcd64d</span><span class="o">.</span><span class="n">prepare_acquisition</span><span class="o">.</span><span class="vm">__doc__</span>

<div class="viewcode-block" id="AndorIDus4xx.start_acquisition">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.start_acquisition">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">start_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the acquisition. Exposed for &#39;run till abort&#39;</span>
<span class="sd">        acquisition mode and external triggering.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;DRV_ACQUIRING&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Starting acquisition.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">start_acquisition</span><span class="p">()</span></div>


    <span class="n">start_acquisition</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">atmcd64d</span><span class="o">.</span><span class="n">start_acquisition</span><span class="o">.</span><span class="vm">__doc__</span>

<div class="viewcode-block" id="AndorIDus4xx.send_software_trigger">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.send_software_trigger">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_software_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">send_software_trigger</span><span class="p">()</span></div>


    <span class="n">send_software_trigger</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">atmcd64d</span><span class="o">.</span><span class="n">send_software_trigger</span><span class="o">.</span><span class="vm">__doc__</span>

<div class="viewcode-block" id="AndorIDus4xx.free_internal_memory">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.free_internal_memory">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">free_internal_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Clearing internal buffer.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">free_internal_memory</span><span class="p">()</span></div>


    <span class="n">free_internal_memory</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">atmcd64d</span><span class="o">.</span><span class="n">free_internal_memory</span><span class="o">.</span><span class="vm">__doc__</span>

<div class="viewcode-block" id="AndorIDus4xx.get_acquisition_timings">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.get_acquisition_timings">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_acquisition_timings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AcquisitionTimings</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The current acquisition timing parameters actually used by</span>
<span class="sd">        the device.</span>

<span class="sd">        This method also updates the caches of the corresponding</span>
<span class="sd">        parameters. This can be used to ensure they are snapshotted</span>
<span class="sd">        correctly when measuring.</span>

<span class="sd">        Docstring of the dll function:</span>
<span class="sd">        ------------------------------</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">timings</span> <span class="o">=</span> <span class="n">AcquisitionTimings</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_acquisition_timings</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exposure_time</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">timings</span><span class="o">.</span><span class="n">exposure_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accumulation_cycle_time</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">timings</span><span class="o">.</span><span class="n">accumulation_cycle_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kinetic_cycle_time</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">timings</span><span class="o">.</span><span class="n">kinetic_cycle_time</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">timings</span></div>


    <span class="n">get_acquisition_timings</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">_merge_docstrings</span><span class="p">(</span><span class="n">get_acquisition_timings</span><span class="p">,</span>
                                                        <span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_acquisition_timings</span><span class="p">)</span>

<div class="viewcode-block" id="AndorIDus4xx.yield_till_abort">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.yield_till_abort">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">yield_till_abort</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields data from the CCD until aborted.</span>

<span class="sd">        This method uses &#39;run-till-abort&#39; mode to continuously acquire</span>
<span class="sd">        data. To use it in the main thread, simply iterate over it::</span>

<span class="sd">            for data in ccd.yield_till_abort():</span>
<span class="sd">                ...</span>

<span class="sd">        A concurrent application could look something like this::</span>

<span class="sd">            import queue</span>
<span class="sd">            import threading</span>

<span class="sd">            def put(queue: queue.Queue, stop_flag: threading.Event):</span>
<span class="sd">                gen = ccd.yield_till_abort()</span>
<span class="sd">                while not stop_flag.is_set():</span>
<span class="sd">                    queue.put(next(gen))</span>

<span class="sd">            queue = queue.Queue()</span>
<span class="sd">            stop_flag = threading.Event()</span>
<span class="sd">            thread = threading.Thread(target=put, args=(queue, stop_flag))</span>
<span class="sd">            thread.start()</span>

<span class="sd">            # queue is continuously filled with data.</span>
<span class="sd">            current_data = queue.get()</span>

<span class="sd">            # Stop the data streaming:</span>
<span class="sd">            stop_flag.set()</span>

<span class="sd">            # Optionally cancel waiting for the next acquisition:</span>
<span class="sd">            ccd.cancel_wait()</span>

<span class="sd">        .. note::</span>
<span class="sd">            Each iteration of this method yields a single frame of</span>
<span class="sd">            data. However, since it is technically a time-series,</span>
<span class="sd">            the yielded data has a time axis of size 1 so that for</span>
<span class="sd">            ``read_mode(&#39;full vertical binning&#39;)`` for example the</span>
<span class="sd">            shape is ``(1, horizontal_pixels)``.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Awkward. RLock does not have `Lock`s locked() method</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="n">blocking</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Another thread is currently locking the CCD.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span><span class="o">.</span><span class="n">set_to</span><span class="p">(</span><span class="s1">&#39;run till abort&#39;</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_acquisition_data</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arm</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_acquisition</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Started acquisition in run-till-abort mode.&#39;</span><span class="p">)</span>
            <span class="n">t_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
            <span class="n">taken</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">wait_for_acquisition_timeout</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">timeout_ms</span><span class="p">)</span>
                    <span class="k">except</span> <span class="n">SDKError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                        <span class="c1"># Most likely timeout before acquisition event.</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error during wait_for_acquisition_timeout(): </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">continue</span>

                    <span class="c1"># Make absolutely sure a new image has arrived</span>
                    <span class="k">while</span> <span class="ow">not</span> <span class="p">(</span><span class="n">new</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_acquisition_progress</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">taken</span><span class="p">):</span>
                        <span class="k">continue</span>

                    <span class="k">if</span> <span class="n">new</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">new</span><span class="o">-</span><span class="mi">1</span><span class="si">}</span><span class="s1"> new frames.&#39;</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_most_recent_image_by_reference</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>

                    <span class="n">t_elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">t_start</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Got new frame in </span><span class="si">{</span><span class="n">t_elapsed</span><span class="si">:</span><span class="s1">.4g</span><span class="si">}</span><span class="s1"> s.&#39;</span><span class="p">)</span>
                    <span class="n">t_start</span> <span class="o">+=</span> <span class="n">t_elapsed</span>
                    <span class="n">taken</span> <span class="o">+=</span> <span class="n">new</span>
                    <span class="k">yield</span> <span class="n">data</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">abort_acquisition</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Stopped acquisition in run-till-abort mode&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="AndorIDus4xx.cool_down">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.cool_down">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">cool_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setpoint</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">target</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;stabilized&#39;</span><span class="p">,</span> <span class="s1">&#39;reached&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reached&#39;</span><span class="p">,</span>
                  <span class="n">show_progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Turn the cooler on and wait for the temperature to stabilize.</span>

<span class="sd">        Args:</span>
<span class="sd">            setpoint: The target temperature. Required if</span>
<span class="sd">                *set_temperature* is not initialized.</span>
<span class="sd">            target: Finish if temperature is reached or reached and stabilized.</span>
<span class="sd">            show_progress: Show a progressbar. The default is True.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">setpoint</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">setpoint</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_temperature</span><span class="o">.</span><span class="n">get</span><span class="p">())</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Please set the set_temperature first or specify setpoint.&#39;</span><span class="p">)</span>

        <span class="n">targets</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">target</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;reached&#39;</span><span class="p">:</span>
            <span class="n">targets</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;DRV_TEMP_NOT_STABILIZED&#39;</span><span class="p">,</span> <span class="s1">&#39;DRV_TEMP_STABILIZED&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">target</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;stabilized&#39;</span><span class="p">:</span>
            <span class="n">targets</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;DRV_TEMP_STABILIZED&#39;</span><span class="p">,)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;target should be one of reached or stabilized.&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_temperature</span><span class="p">(</span><span class="n">setpoint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cooler</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;on&#39;</span><span class="p">)</span>

        <span class="c1"># bar does not show for negative totals, but ok</span>
        <span class="k">with</span> <span class="n">tqdm</span><span class="p">(</span>
                <span class="n">total</span><span class="o">=</span><span class="p">(</span><span class="n">initial</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">get</span><span class="p">())</span> <span class="o">-</span> <span class="n">setpoint</span><span class="p">,</span>
                <span class="n">desc</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s1"> cooling down from </span><span class="si">{</span><span class="n">initial</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">unit</span><span class="si">}</span><span class="s1"> &#39;</span>
                     <span class="sa">f</span><span class="s1">&#39;to </span><span class="si">{</span><span class="n">setpoint</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">unit</span><span class="si">}</span><span class="s1">. |Delta|&#39;</span><span class="p">,</span>
                <span class="n">unit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span>
                <span class="n">disable</span><span class="o">=</span><span class="ow">not</span> <span class="n">show_progress</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">pbar</span><span class="p">:</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">status</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmcd64d</span><span class="o">.</span><span class="n">get_cooling_status</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">:</span>
                <span class="c1"># For lack of a better method:</span>
                <span class="c1"># https://github.com/tqdm/tqdm/issues/1264</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">postfix</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;status=</span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">initial</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">pbar</span><span class="o">.</span><span class="n">postfix</span> <span class="o">=</span> <span class="n">status</span>
            <span class="n">pbar</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">pbar</span><span class="o">.</span><span class="n">total</span>
            <span class="n">pbar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>


<div class="viewcode-block" id="AndorIDus4xx.warm_up">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Andor.html#qcodes_contrib_drivers.drivers.Andor.Andor_iDus4xx.AndorIDus4xx.warm_up">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">warm_up</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="n">show_progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Turn the cooler off and wait for the temperature to reach target.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        target : int, optional</span>
<span class="sd">            The target temperature. Defaults to 15C.</span>
<span class="sd">        show_progress : bool, optional</span>
<span class="sd">            Show a progressbar. The default is True.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cooler</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

        <span class="c1"># bar does not show for negative totals, but ok</span>
        <span class="k">with</span> <span class="n">tqdm</span><span class="p">(</span>
                <span class="n">total</span><span class="o">=</span><span class="n">target</span> <span class="o">-</span> <span class="p">(</span><span class="n">initial</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span>
                <span class="n">desc</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> warming up from </span><span class="si">{</span><span class="n">initial</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">unit</span><span class="si">}</span><span class="s1"> &#39;</span>
                     <span class="sa">f</span><span class="s1">&#39;to </span><span class="si">{</span><span class="n">target</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">unit</span><span class="si">}</span><span class="s1">. Delta&#39;</span><span class="p">,</span>
                <span class="n">unit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span>
                <span class="n">disable</span><span class="o">=</span><span class="ow">not</span> <span class="n">show_progress</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">pbar</span><span class="p">:</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">temp</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">get</span><span class="p">())</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">:</span>
                <span class="c1"># For lack of a better method:</span>
                <span class="c1"># https://github.com/tqdm/tqdm/issues/1264</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">-</span> <span class="n">initial</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">pbar</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">pbar</span><span class="o">.</span><span class="n">total</span>
            <span class="n">pbar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>
</div>

</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2019, QCoDeS Users
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../../_static/documentation_options.js?v=0ec1ef52"></script>
    <script src="../../../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../../../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    </body>
</html>